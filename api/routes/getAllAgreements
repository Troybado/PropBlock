var express = require("express");
require("dotenv").config();
var Moralis = require("../modules/moralis");
var config = require("../config");
var helper = require("../functions/Helper");

var router = express.Router();

//getting purchases requests for a seller
router.get("/getAllAgreements", async function (req, res, next) {
  const sessionToken = req.query.sessionToken;
  var ownerAddress = req.query.ownerAddress
  var isLoggedIn = await helper.isAuthenticated(sessionToken, ownerAddress)

  if (!isLoggedIn) {
    res.status(401);
    res.send("not authenticated")
    return;
  }

  if (mode === undefined
     || ownerAddress === undefined) {
    res.status(422).send("wrong input")
    return
  }

  ownerAddress = helper.toCheckSumAddress(ownerAddress)
  var query = new Moralis.Query("AgreementDrafts")
});

module.exports = router;
